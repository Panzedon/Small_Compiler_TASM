Note: This project is in a very early stage. The code is crude and needs significant further development.

Overview
This version is very different from the original coursework. It has been restructured to allow adding new commands and supporting new operand types in the future.

Currently, it generates a listing file while saving bytes for strings that will eventually be used in object file generation. Comments for structures and functions will be added later.

Planned refactoring includes moving part of the contents of main.cpp to a separate file for better organization and modularity.

Project Structure
main.cpp
Calls CallCompiler, passing it the assembly source file name. Ensures that the output listing file (analysis.lst) is generated during compilation.

compiler module
Contains the CallCompiler function, which runs the first and second passes and manages the overall compilation process. It also outputs debug information to help trace compilation steps.

lexical.cpp / lexical.h
Functions for parsing source lines into lexemes, analyzing them, and assigning types to each lexeme.

first_view
Functions for the first pass.

second_view
Implements the second pass.

error_handler
A class for reporting errors to the listing file.

commands_types
Contains most of the data the compiler needs: register opcodes, templates for various addressing types, etc.

Listing folder
Responsible for generating the listing file and storing strings that will be used for object file generation.

Current Capabilities
Identifiers
May contain uppercase and lowercase Latin letters and digits.

Must begin with a letter.

Case-insensitive.

Maximum length: 7 characters.

Constants
Supports hexadecimal, decimal, binary, and string constants.

Directives
Supported: END, SEGMENT (no operands), ENDS, ASSUME.

DB, DW, DD directives support a single constant operand (only DB allows string constants).

Data and Addressing Size
Only 32-bit data and segment offsets supported.

16-bit data and offsets are not used.

Memory Operand Addressing
Base-indexed addressing with constant displacement and scaling is supported, e.g.:

[edx + esi*4 + 6]

[ebx + ecx*2 + 12]

Supports the ptr operator for explicit operand type specification.

Segment Override Prefixes
Can be specified explicitly.

Automatically generated by the compiler when needed.

Supported Instructions
POPAD

PUSH reg

NEG mem

ADC reg, imm

SBB reg, reg

LDS reg, mem

MOV mem, reg

AND mem, imm

JNAE

JMP (direct intersegment addressing)

Where:

reg = 8-bit or 32-bit general-purpose register

mem = memory operand address

imm = 8-bit or 32-bit immediate constant

Notes and Future Plans
Adding more instructions and operand types.

Adding detailed comments for all structures and functions.

Implementing object file generation using saved bytes.

